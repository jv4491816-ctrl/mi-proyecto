<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guitarra F치cil - Aprende Guitarra desde Cero</title>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #2ecc71;
            --strong-beat-color: #e74c3c;
            --weak-beat-color: #f39c12;
            --inactive-beat-color: #bdc3c7;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: var(--dark-color);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        header {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
            font-size: 2rem;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            align-items: center;
        }
        
        .nav-links li {
            margin-left: 1.5rem;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            padding: 0.5rem 1rem;
            border-radius: 5px;
        }
        
        .nav-links a:hover, .nav-links a.active {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--light-color);
        }

        /* Estilos para la secci칩n de autenticaci칩n */
        .auth-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .role-badge {
            background: var(--light-color);
            color: var(--secondary-color);
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-left: 0.5rem;
            font-weight: bold;
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--light-color);
            color: var(--light-color);
            padding: 8px 16px;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-outline:hover {
            background-color: var(--light-color);
            color: var(--secondary-color);
        }

        .btn-admin {
            background-color: #8e44ad;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-admin:hover {
            background-color: #7d3c98;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-container {
            display: flex;
            width: 90%;
            max-width: 900px;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-welcome-section {
            flex: 1;
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            padding: 40px 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            color: white;
            position: relative;
        }

        .modal-welcome-section h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .modal-welcome-section h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .modal-welcome-section p {
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .modal-welcome-section .highlight {
            color: #fff;
            background: var(--primary-color);
            padding: 2px 8px;
            border-radius: 5px;
            font-weight: 600;
        }

        .modal-guitar-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            background: white;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-nav-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .modal-nav-btn {
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-size: 14px;
        }

        .modal-signup-btn {
            background: transparent;
            border: 2px solid white;
            color: white;
        }

        .modal-login-btn-nav {
            background: white;
            color: var(--secondary-color);
        }

        .modal-nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .modal-close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-close-btn:hover {
            transform: rotate(90deg);
        }

        .modal-form-section {
            flex: 1;
            padding: 40px 30px;
            background: white;
            color: var(--secondary-color);
            max-height: 600px;
            overflow-y: auto;
        }

        .modal-form-header {
            margin-bottom: 25px;
        }

        .modal-form-header h2 {
            font-size: 1.8rem;
            color: var(--secondary-color);
            margin-bottom: 10px;
        }

        .modal-form-header p {
            color: #666;
        }

        .modal-form-group {
            margin-bottom: 20px;
        }

        .modal-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }

        .modal-input-with-icon {
            position: relative;
        }

        .modal-input-with-icon i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-color);
        }

        .modal-input-with-icon input {
            width: 100%;
            padding: 12px 12px 12px 40px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
            background: #f8f9fa;
            color: var(--secondary-color);
        }

        .modal-input-with-icon input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: white;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .modal-forgot-password {
            text-align: right;
            margin-bottom: 20px;
        }

        .modal-forgot-password a {
            color: var(--primary-color);
            text-decoration: none;
            font-size: 13px;
            font-weight: 500;
        }

        .modal-forgot-password a:hover {
            text-decoration: underline;
        }

        .modal-submit-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .modal-submit-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .modal-submit-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .modal-separator {
            display: flex;
            align-items: center;
            margin: 20px 0;
            color: #888;
        }

        .modal-separator::before,
        .modal-separator::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid #e0e0e0;
        }

        .modal-separator span {
            padding: 0 15px;
            font-size: 13px;
        }

        .modal-social-login {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .modal-social-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--secondary-color);
        }

        .modal-social-btn:hover {
            transform: translateY(-2px);
            border-color: var(--primary-color);
        }

        .modal-signup-link {
            text-align: center;
            margin-top: 15px;
            color: #666;
            font-size: 14px;
        }

        .modal-signup-link a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
        }

        .modal-signup-link a:hover {
            text-decoration: underline;
        }

        .error-message {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 5px;
            display: block;
            min-height: 18px;
        }

        .input-with-icon.error input {
            border-color: #e74c3c;
        }

        .input-with-icon.success input {
            border-color: #27ae60;
        }

        .success-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71) !important;
        }

        .error-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b) !important;
        }

        .loading-spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
            flex: 1;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 4rem 2rem;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 2rem;
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 2rem;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--accent-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            text-decoration: none;
        }
        
        .btn:hover {
            background-color: #c0392b;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--secondary-color);
            position: relative;
        }
        
        .section-title::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background-color: var(--primary-color);
            margin: 0.5rem auto;
            border-radius: 2px;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .feature-card {
            background-color: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            text-align: center;
            cursor: pointer;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-card h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .feature-card h3 i {
            margin-right: 10px;
            font-size: 1.5rem;
        }
        
        /* Estilos del nuevo afinador */
        .tuning-section {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 3rem;
        }

        .afinador-container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .afinador-header {
            margin-bottom: 30px;
        }

        .afinador-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #3498db, #2ecc71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .afinador-subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .target-frequency {
            font-size: 1.1rem;
            color: #3498db;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .string-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .string-btn {
            padding: 12px 8px;
            border: 2px solid;
            border-radius: 10px;
            color: white;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .string-btn:hover {
            transform: translateY(-2px);
            filter: brightness(1.2);
        }

        .string-btn.active {
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
            filter: brightness(1.3);
        }

        .string-btn.mi-high {
            background: #3498db;
            border-color: #2980b9;
        }

        .string-btn.si {
            background: #2ecc71;
            border-color: #27ae60;
        }

        .string-btn.sol {
            background: #9b59b6;
            border-color: #8e44ad;
        }

        .string-btn.re {
            background: #e74c3c;
            border-color: #c0392b;
        }

        .string-btn.la {
            background: #f39c12;
            border-color: #d35400;
        }

        .string-btn.mi-low {
            background: #1abc9c;
            border-color: #16a085;
        }

        .string-btn.mi-high:hover {
            background: #2980b9;
        }

        .string-btn.si:hover {
            background: #27ae60;
        }

        .string-btn.sol:hover {
            background: #8e44ad;
        }

        .string-btn.re:hover {
            background: #c0392b;
        }

        .string-btn.la:hover {
            background: #d35400;
        }

        .string-btn.mi-low:hover {
            background: #16a085;
        }

        .string-btn.mi-high.active {
            background: #2980b9;
            border-color: #1f618d;
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.7);
        }

        .string-btn.si.active {
            background: #27ae60;
            border-color: #229954;
            box-shadow: 0 0 20px rgba(46, 204, 113, 0.7);
        }

        .string-btn.sol.active {
            background: #8e44ad;
            border-color: #7d3c98;
            box-shadow: 0 0 20px rgba(155, 89, 182, 0.7);
        }

        .string-btn.re.active {
            background: #c0392b;
            border-color: #a93226;
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.7);
        }

        .string-btn.la.active {
            background: #d35400;
            border-color: #ba4a00;
            box-shadow: 0 0 20px rgba(243, 156, 18, 0.7);
        }

        .string-btn.mi-low.active {
            background: #16a085;
            border-color: #138d75;
            box-shadow: 0 0 20px rgba(26, 188, 156, 0.7);
        }

        .string-number {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .string-note {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .tuner-display {
            margin: 30px 0;
        }

        .circle-indicator {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: bold;
            transition: all 0.3s ease;
            border: 4px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .circle-indicator::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50%;
            background: conic-gradient(
                #e74c3c 0% 33%, 
                #f39c12 33% 66%, 
                #2ecc71 66% 100%
            );
            opacity: 0.3;
            z-index: -1;
        }

        .circle-indicator.perfect {
            background: rgba(46, 204, 113, 0.2);
            border-color: #2ecc71;
            box-shadow: 0 0 20px rgba(46, 204, 113, 0.5);
        }

        .circle-indicator.sharp {
            background: rgba(243, 156, 18, 0.2);
            border-color: #f39c12;
            box-shadow: 0 0 20px rgba(243, 156, 18, 0.5);
        }

        .circle-indicator.flat {
            background: rgba(231, 76, 60, 0.2);
            border-color: #e74c3c;
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.5);
        }

        .deviation-display {
            font-size: 1.5rem;
            margin: 20px 0;
            height: 30px;
            font-weight: bold;
        }

        .frequency-display {
            font-size: 1.2rem;
            margin: 15px 0;
            color: #3498db;
        }

        .cents-display {
            font-size: 1.3rem;
            margin: 10px 0;
            color: #f39c12;
            font-weight: bold;
        }

        .needle-container {
            height: 100px;
            position: relative;
            margin: 30px 0;
        }

        .needle-scale {
            height: 4px;
            background: linear-gradient(to right, #e74c3c, #f39c12, #2ecc71, #f39c12, #e74c3c);
            border-radius: 2px;
            position: relative;
            margin: 48px 20px 0;
        }

        .needle {
            width: 2px;
            height: 60px;
            background: white;
            position: absolute;
            top: 0;
            left: 50%;
            transform-origin: bottom center;
            transition: transform 0.3s ease;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .needle-center {
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .scale-marks {
            display: flex;
            justify-content: space-between;
            margin: 5px 20px 0;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .afinador-controls {
            margin: 30px 0 20px;
        }

        .afinador-btn {
            padding: 15px 30px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 0 auto;
        }

        .afinador-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .afinador-btn:active {
            transform: translateY(0);
        }

        .afinador-btn.listening {
            background: #2ecc71;
            animation: pulse 1.5s infinite;
        }

        .afinador-status {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            font-size: 0.9rem;
        }

        .afinador-instructions {
            margin-top: 25px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .signal-quality {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            font-size: 0.9rem;
        }

        .quality-bar {
            width: 150px;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }

        .quality-level {
            height: 100%;
            background: linear-gradient(to right, #e74c3c, #f39c12, #2ecc71);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .debug-info {
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 0.8rem;
            font-family: monospace;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* ========== ESTILOS DEL METR칍NOMO ========== */
        .metronomo-container {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            border-radius: 10px;
        }

        .metronomo-card {
            background: white;
            border-radius: 20px;
            padding: 40px 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
            width: 100%;
            max-width: 600px;
        }

        .bpm-display {
            margin-bottom: 40px;
        }

        .bpm-value {
            font-size: 5rem;
            font-weight: 700;
            color: #2c3e50;
            text-shadow: 0 0 15px rgba(52, 152, 219, 0.3);
            line-height: 1;
        }

        .bpm-label {
            font-size: 1rem;
            color: #3498db;
            margin-top: 5px;
            font-weight: 600;
        }

        .bpm-control {
            margin: 30px 0;
        }

        .slider-container {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }

        .slider {
            width: 100%;
            height: 12px;
            -webkit-appearance: none;
            appearance: none;
            background: linear-gradient(to right, #3498db, #2c3e50);
            border-radius: 6px;
            outline: none;
            margin-bottom: 10px;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: white;
            border: 3px solid #3498db;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.7);
        }

        .slider::-moz-range-thumb {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: white;
            border: 3px solid #3498db;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.7);
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            color: #2c3e50;
            font-weight: 600;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 30px 0;
        }

        .control-group {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 2px solid #e9ecef;
            transition: all 0.3s;
        }

        .control-group:hover {
            border-color: #3498db;
            transform: translateY(-2px);
        }

        .control-label {
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .time-input {
            background: white;
            border: 2px solid #3498db;
            color: #2c3e50;
            font-size: 1.5rem;
            width: 70px;
            height: 70px;
            text-align: center;
            border-radius: 10px;
            font-weight: bold;
            margin: 0 auto;
            display: block;
        }

        .time-input:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.5);
        }

        .subdivision-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .subdivision-btn {
            background: white;
            border: 2px solid #e9ecef;
            color: #2c3e50;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        .subdivision-btn:hover {
            border-color: #3498db;
            color: #3498db;
        }

        .subdivision-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .beat-display {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .beat-cell {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
            border: 2px solid #e9ecef;
            transition: all 0.1s;
        }

        .beat-cell.active {
            background: #3498db;
            color: white;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(52, 152, 219, 0.5);
        }

        .beat-cell.accent {
            border-color: #2c3e50;
            font-weight: 800;
        }

        .beat-cell.accent.active {
            background: #2c3e50;
            color: white;
            box-shadow: 0 0 15px rgba(44, 62, 80, 0.5);
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .action-btn {
            padding: 15px 40px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            font-weight: bold;
            min-width: 180px;
            justify-content: center;
        }

        .start-btn {
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.6);
        }

        .stop-btn {
            background: linear-gradient(to right, #e74c3c, #c0392b);
            color: white;
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }

        .stop-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(231, 76, 60, 0.6);
        }

        .tap-tempo-btn {
            background: white;
            border: 2px solid #3498db;
            color: #3498db;
            padding: 12px 30px;
            border-radius: 50px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            font-weight: bold;
            margin-top: 15px;
        }

        .tap-tempo-btn:hover {
            background: #3498db;
            color: white;
            transform: translateY(-3px);
        }

        .shortcuts-info {
            margin-top: 30px;
            color: white;
            font-size: 0.9rem;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .shortcuts-info i {
            color: #3498db;
            margin-right: 8px;
        }

        /* Elementos espec칤ficos por rol */
        .student-only, .admin-only {
            display: none;
        }

        .admin-panel {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .student-dashboard {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }
        
        footer {
            background-color: var(--secondary-color);
            color: white;
            padding: 2rem 1rem;
            text-align: center;
            margin-top: auto;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .social-links {
            display: flex;
            margin: 1rem 0;
        }
        
        .social-links a {
            color: white;
            margin: 0 0.5rem;
            font-size: 1.5rem;
            transition: color 0.3s;
        }
        
        .social-links a:hover {
            color: var(--primary-color);
        }
        
        .back-btn {
            margin-bottom: 1.5rem;
            display: inline-flex;
            align-items: center;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: bold;
        }
        
        .back-btn i {
            margin-right: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .nav-links {
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--secondary-color);
                display: none;
                padding: 1rem;
            }
            
            .nav-links.active {
                display: flex;
            }
            
            .nav-links li {
                margin: 0.5rem 0;
            }
            
            .auth-section {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .features {
                grid-template-columns: 1fr;
            }
            
            .string-selector {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .string-btn {
                flex-direction: row;
                justify-content: center;
                padding: 10px;
            }
            
            .modal-container {
                flex-direction: column;
                max-height: 90vh;
                overflow-y: auto;
            }
            
            .modal-welcome-section, .modal-form-section {
                padding: 30px 20px;
            }
            
            .modal-welcome-section h1 {
                font-size: 1.8rem;
            }
            
            .modal-welcome-section h2 {
                font-size: 1.3rem;
            }
            
            .modal-nav-buttons {
                flex-direction: column;
            }
            
            .modal-form-section {
                max-height: none;
            }
            
            .afinador-container {
                padding: 20px;
            }
            
            .afinador-header h1 {
                font-size: 2rem;
            }
            
            .circle-indicator {
                width: 150px;
                height: 150px;
                font-size: 2.5rem;
            }
            
            .afinador-btn {
                padding: 12px 25px;
                font-size: 1rem;
            }
            
            /* Estilos responsivos del metr칩nomo */
            .metronomo-card {
                padding: 30px 20px;
            }
            
            .bpm-value {
                font-size: 4rem;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .action-btn {
                width: 100%;
                max-width: 300px;
            }
            
            .controls-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .control-group {
                max-width: 250px;
                margin: 0 auto;
            }
            
            .beat-cell {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .beat-display {
                gap: 5px;
            }
            
            .beat-cell {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
            
            .time-input {
                width: 60px;
                height: 60px;
                font-size: 1.3rem;
            }
            
            .bpm-value {
                font-size: 3rem;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <i class="fas fa-guitar"></i>
                Guitarra F치cil
            </div>
            <ul class="nav-links">
                <li><a href="#" class="nav-link active" data-page="index">Inicio</a></li>
                <li><a href="#" class="nav-link" data-page="afinacion-tips">Afinaci칩n y Tips</a></li>
                <li><a href="#" class="nav-link" data-page="metronomo">Metr칩nomo</a></li>
                <li><a href="#" class="nav-link" data-page="partituras">Partituras</a></li>
                <li><a href="#" class="nav-link" data-page="aprendizaje">Aprendizaje</a></li>
                <li><a href="#" class="nav-link" data-page="guitarra">Guitarra</a></li>
                
                <!-- Secci칩n de Autenticaci칩n -->
                <li>
                    <div class="auth-section">
                        <div id="auth-buttons">
                            <div class="login-options" style="display: flex; gap: 10px;">
                                <button id="student-login-btn" class="btn-outline">Estudiante</button>
                                <button id="admin-login-btn" class="btn-admin">Administrador</button>
                            </div>
                        </div>
                        <div id="user-info" style="display: none; align-items: center; gap: 10px;">
                            <span id="user-name" style="color: white;"></span>
                            <span id="user-role" class="role-badge"></span>
                            <button id="logout-btn" class="btn-outline" style="padding: 6px 12px; font-size: 0.9rem;">Cerrar Sesi칩n</button>
                        </div>
                    </div>
                </li>
            </ul>
        </nav>
    </header>

    <!-- Modal de Login -->
    <div id="loginModal" class="modal">
        <div class="modal-container">
            <div class="modal-welcome-section">
                <button class="modal-close-btn" id="modalCloseBtn">&times;</button>
                <div class="modal-guitar-icon">
                    <i class="fas fa-guitar"></i>
                </div>
                <h1>춰Hola!...M칰sico</h1>
                <h2>Aprende Guitarra, <span class="highlight">Domina la M칰sica</span></h2>
                <p>Domina la guitarra y descubre el m칰sico que llevas dentro. Aprende a tu ritmo con nuestros cursos especializados, desde principiante hasta avanzado.</p>
                <div class="modal-nav-buttons">
                    <button class="modal-nav-btn modal-signup-btn" id="modalSignupBtn">REGISTRARSE</button>
                    <button class="modal-nav-btn modal-login-btn-nav" id="modalLoginBtn">INICIAR SESI칍N</button>
                </div>
            </div>
            
            <div class="modal-form-section" id="modalFormSection">
                <!-- El contenido del formulario se cargar치 din치micamente -->
            </div>
        </div>
    </div>

    <div class="container">
        <!-- P치gina de Inicio -->
        <div id="index" class="page active">
            <section class="hero">
                <h1>Aprende Guitarra desde Cero</h1>
                <p>Con herramientas pr치cticas: afinador, metr칩nomo, teor칤a y canciones para todos los niveles.</p>
                <a href="#" class="btn" data-page="afinacion-tips">Comenzar a Aprender</a>
            </section>

            <!-- Dashboard para usuarios autenticados -->
            <div id="student-dashboard" class="student-dashboard student-only" style="display: none;">
                <h3><i class="fas fa-tachometer-alt"></i> Mi Progreso</h3>
                <p>Bienvenido de vuelta, <span id="student-welcome-name"></span>!</p>
                <div class="progress-info">
                    <p>Nivel: <span id="student-level">1</span></p>
                    <p>Progreso: <span id="student-progress">0%</span></p>
                    <p>Lecciones completadas: <span id="student-lessons">0</span></p>
                </div>
            </div>

            <div id="admin-panel" class="admin-panel admin-only" style="display: none;">
                <h3><i class="fas fa-cog"></i> Panel de Administraci칩n</h3>
                <p>Bienvenido, <span id="admin-welcome-name"></span></p>
                <div class="admin-actions">
                    <button class="btn" onclick="manageUsers()">Gestionar Usuarios</button>
                    <button class="btn" onclick="manageContent()">Gestionar Contenido</button>
                    <button class="btn" onclick="viewStatistics()">Ver Estad칤sticas</button>
                </div>
            </div>

            <section class="features">
                <div class="feature-card" data-page="metronomo">
                    <h3><i class="fas fa-tachometer-alt"></i> Metr칩nomo</h3>
                    <p>Mant칠n el ritmo perfecto mientras practicas</p>
                </div>
                
                <div class="feature-card" data-page="afinacion-tips">
                    <h3><i class="fas fa-music"></i> Afinador y Tips</h3>
                    <p>Afinar tu guitarra y consejos para mejorar</p>
                </div>
                
                <div class="feature-card" data-page="partituras">
                    <h3><i class="fas fa-file-alt"></i> Partituras</h3>
                    <p>Encuentra canciones para todos los niveles</p>
                </div>
                
                <div class="feature-card" data-page="aprendizaje">
                    <h3><i class="fas fa-graduation-cap"></i> Aprendizaje</h3>
                    <p>Sistema completo de b치sico a intermedio</p>
                </div>
            </section>

            <!-- Contenido exclusivo para estudiantes -->
            <div class="student-only" style="display: none;">
                <h2 class="section-title">Mis Lecciones</h2>
                <div class="features">
                    <div class="feature-card">
                        <h3><i class="fas fa-play-circle"></i> Continuar Aprendiendo</h3>
                        <p>Retoma donde lo dejaste</p>
                    </div>
                    <div class="feature-card">
                        <h3><i class="fas fa-chart-line"></i> Mi Progreso</h3>
                        <p>Revisa tu avance detallado</p>
                    </div>
                </div>
            </div>

            <!-- Contenido exclusivo para administradores -->
            <div class="admin-only" style="display: none;">
                <h2 class="section-title">Herramientas de Administraci칩n</h2>
                <div class="features">
                    <div class="feature-card">
                        <h3><i class="fas fa-users"></i> Gesti칩n de Usuarios</h3>
                        <p>Administra estudiantes y permisos</p>
                    </div>
                    <div class="feature-card">
                        <h3><i class="fas fa-book"></i> Gesti칩n de Contenido</h3>
                        <p>Actualiza lecciones y materiales</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- P치gina de Afinaci칩n y Tips con el nuevo afinador -->
        <div id="afinacion-tips" class="page">
            <a href="#" class="back-btn" data-page="index"><i class="fas fa-arrow-left"></i> Volver al Inicio</a>
            <h2 class="section-title">Afinaci칩n y Tips para Guitarra</h2>
            
            <div class="tuning-section">
                <div class="afinador-container">
                    <div class="afinador-header">
                        <h1>Afinador Maximus</h1>
                        <p class="afinador-subtitle">Afinador para 6 Cuerdas</p>
                        <p class="target-frequency" id="targetFrequency">Frecuencia objetivo: <strong>329.63 Hz</strong> (Mi - E4)</p>
                    </div>

                    <div class="string-selector">
                        <button class="string-btn mi-high active" data-string="mi-high" data-frequency="329.63" data-note="E4">
                            <span class="string-number">1춹</span>
                            <span class="string-note">MI</span>
                        </button>
                        <button class="string-btn si" data-string="si" data-frequency="246.94" data-note="B3">
                            <span class="string-number">2춹</span>
                            <span class="string-note">SI</span>
                        </button>
                        <button class="string-btn sol" data-string="sol" data-frequency="196.00" data-note="G3">
                            <span class="string-number">3춹</span>
                            <span class="string-note">SOL</span>
                        </button>
                        <button class="string-btn re" data-string="re" data-frequency="146.83" data-note="D3">
                            <span class="string-number">4춹</span>
                            <span class="string-note">RE</span>
                        </button>
                        <button class="string-btn la" data-string="la" data-frequency="110.00" data-note="A2">
                            <span class="string-number">5춹</span>
                            <span class="string-note">LA</span>
                        </button>
                        <button class="string-btn mi-low" data-string="mi-low" data-frequency="82.41" data-note="E2">
                            <span class="string-number">6춹</span>
                            <span class="string-note">MI</span>
                        </button>
                    </div>

                    <div class="tuner-display">
                        <div class="circle-indicator" id="circleIndicator">
                            E4
                        </div>
                        
                        <div class="deviation-display" id="deviationText">
                            Selecciona una cuerda
                        </div>
                        
                        <div class="frequency-display" id="frequencyDisplay">
                            -- Hz
                        </div>

                        <div class="cents-display" id="centsDisplay">
                            -- cents
                        </div>

                        <div class="signal-quality">
                            <span>Se침al:</span>
                            <div class="quality-bar">
                                <div class="quality-level" id="qualityLevel" style="width: 0%"></div>
                            </div>
                            <span id="qualityValue">0%</span>
                        </div>

                        <div class="needle-container">
                            <div class="needle-scale">
                                <div class="needle" id="needle"></div>
                                <div class="needle-center"></div>
                            </div>
                            <div class="scale-marks">
                                <span>-50</span>
                                <span>-25</span>
                                <span>0</span>
                                <span>+25</span>
                                <span>+50</span>
                            </div>
                        </div>
                    </div>

                    <div class="debug-info" id="debugInfo">
                        Estado: Selecciona una cuerda y activa el micr칩fono
                    </div>

                    <div class="afinador-controls">
                        <button class="afinador-btn" id="micToggle">
                            <span>游꿗</span> <span id="micStatus">Activar Micr칩fono</span>
                        </button>
                    </div>

                    <div class="afinador-status">
                        <div id="statusText">Selecciona una cuerda y activa el micr칩fono</div>
                    </div>

                    <div class="afinador-instructions">
                        <p><strong>Instrucciones:</strong></p>
                        <p>1. <strong>Selecciona</strong> la cuerda que quieres afinar</p>
                        <p>2. <strong>Activa el micr칩fono</strong> y permite el acceso</p>
                        <p>3. <strong>Toca la cuerda seleccionada</strong> de tu guitarra</p>
                        <p>4. <strong>Ajusta</strong> hasta que est칠 en <strong style="color:#2ecc71">VERDE</strong></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- P치gina del Metr칩nomo -->
        <div id="metronomo" class="page">
            <a href="#" class="back-btn" data-page="index"><i class="fas fa-arrow-left"></i> Volver al Inicio</a>
            <h2 class="section-title">Metr칩nomo</h2>
            
            <div class="tuning-section">
                <div class="metronomo-container">
                    <div class="metronomo-card">
                        <div class="bpm-display">
                            <div class="bpm-value" id="bpmValue">120</div>
                            <div class="bpm-label">PULSOS POR MINUTO</div>
                        </div>
                        
                        <div class="bpm-control">
                            <div class="slider-container">
                                <input type="range" min="40" max="240" value="120" class="slider" id="bpmSlider">
                                <div class="slider-labels">
                                    <span>40</span>
                                    <span>140</span>
                                    <span>240</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="controls-grid">
                            <div class="control-group">
                                <div class="control-label">COMP츼S</div>
                                <input type="number" min="1" max="4" value="4" class="time-input" id="timeTop">
                            </div>
                            
                            <div class="control-group">
                                <div class="control-label">BPM</div>
                                <div class="bpm-value" style="font-size: 2rem; color: #2c3e50;" id="currentBpm">120</div>
                            </div>
                            
                            <div class="control-group">
                                <div class="control-label">SUBDIVISI칍N</div>
                                <div class="subdivision-buttons" id="subdivisionButtons">
                                    <button class="subdivision-btn active" data-value="1">1/1</button>
                                    <button class="subdivision-btn" data-value="2">1/2</button>
                                    <button class="subdivision-btn" data-value="4">1/4</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="beat-display" id="beatDisplay">
                            <!-- Las celdas de comp치s se generar치n con JavaScript -->
                        </div>
                        
                        <div class="action-buttons">
                            <button class="action-btn start-btn" id="startBtn">
                                <i class="fas fa-play"></i> Iniciar
                            </button>
                            <button class="action-btn stop-btn" id="stopBtn" disabled>
                                <i class="fas fa-stop"></i> Detener
                            </button>
                        </div>
                        
                        <button class="tap-tempo-btn" id="tapTempoBtn">
                            <i class="fas fa-hand-point-up"></i> Tap Tempo
                        </button>
                        
                        <div class="shortcuts-info">
                            <p><i class="fas fa-keyboard"></i> <strong>Atajos de teclado:</strong></p>
                            <p>Espacio: Iniciar/Detener  Flechas 놱: Ajustar BPM  T: Tap Tempo</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="partituras" class="page">
            <a href="#" class="back-btn" data-page="index"><i class="fas fa-arrow-left"></i> Volver al Inicio</a>
            <h2 class="section-title">Partituras</h2>
            <div class="tuning-section">
                <p>Biblioteca de partituras y canciones...</p>
            </div>
        </div>

        <div id="aprendizaje" class="page">
            <a href="#" class="back-btn" data-page="index"><i class="fas fa-arrow-left"></i> Volver al Inicio</a>
            <h2 class="section-title">Sistema de Aprendizaje</h2>
            <div class="tuning-section">
                <p>Lecciones y cursos para todos los niveles...</p>
            </div>
        </div>

        <div id="guitarra" class="page">
            <a href="#" class="back-btn" data-page="index"><i class="fas fa-arrow-left"></i> Volver al Inicio</a>
            <h2 class="section-title">Todo sobre la Guitarra</h2>
            <div class="tuning-section">
                <p>Informaci칩n sobre guitarras y accesorios...</p>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <p>Guitarra F치cil - Tu centro de aprendizaje musical</p>
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
                <a href="#"><i class="fab fa-tiktok"></i></a>
            </div>
            <p>&copy; 2023 Guitarra F치cil. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        // ========== SISTEMA DE NAVEGACI칍N ENTRE P츼GINAS ==========
        document.addEventListener('DOMContentLoaded', function() {
            // Obtener todos los enlaces de navegaci칩n
            const navLinks = document.querySelectorAll('.nav-link, .back-btn, .feature-card');
            const pages = document.querySelectorAll('.page');
            
            // Funci칩n para cambiar de p치gina
            function showPage(pageId) {
                // Ocultar todas las p치ginas
                pages.forEach(page => {
                    page.classList.remove('active');
                });
                
                // Mostrar la p치gina seleccionada
                document.getElementById(pageId).classList.add('active');
                
                // Actualizar enlace activo en la navegaci칩n
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('data-page') === pageId) {
                        link.classList.add('active');
                    }
                });
                
                // Actualizar la URL sin recargar la p치gina
                history.pushState({page: pageId}, '', `#${pageId}`);
            }
            
            // Event listeners para los enlaces de navegaci칩n
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('data-page');
                    showPage(pageId);
                    
                    // Si se va a la p치gina del metr칩nomo, inicializarlo
                    if (pageId === 'metronomo') {
                        initMetronomo();
                    }
                });
            });
            
            // Manejar el bot칩n de retroceso del navegador
            window.addEventListener('popstate', function(e) {
                if (e.state && e.state.page) {
                    showPage(e.state.page);
                    
                    // Si se va a la p치gina del metr칩nomo, inicializarlo
                    if (e.state.page === 'metronomo') {
                        initMetronomo();
                    }
                } else {
                    showPage('index');
                }
            });
            
            // Cargar p치gina basada en el hash de la URL
            const initialPage = window.location.hash.substring(1) || 'index';
            showPage(initialPage);
            
            // Si la p치gina inicial es el metr칩nomo, inicializarlo
            if (initialPage === 'metronomo') {
                initMetronomo();
            }

            // ========== NUEVO SISTEMA DE AUTENTICACI칍N ==========
            // Elementos del DOM
            const loginModal = document.getElementById('loginModal');
            const modalFormSection = document.getElementById('modalFormSection');
            const modalCloseBtn = document.getElementById('modalCloseBtn');
            const modalSignupBtn = document.getElementById('modalSignupBtn');
            const modalLoginBtn = document.getElementById('modalLoginBtn');
            const studentLoginBtn = document.getElementById('student-login-btn');
            const adminLoginBtn = document.getElementById('admin-login-btn');
            const logoutBtn = document.getElementById('logout-btn');
            const authButtons = document.getElementById('auth-buttons');
            const userInfo = document.getElementById('user-info');
            const userName = document.getElementById('user-name');
            const userRole = document.getElementById('user-role');

            // Variables de estado
            let currentFormType = 'login'; // 'login' o 'signup'
            let currentUser = null;

            // Cargar usuario desde localStorage si existe
            function loadUserFromStorage() {
                const savedUser = localStorage.getItem('guitarraFacilUser');
                if (savedUser) {
                    currentUser = JSON.parse(savedUser);
                    updateUIForUser(currentUser);
                }
            }

            // Guardar usuario en localStorage
            function saveUserToStorage(user) {
                localStorage.setItem('guitarraFacilUser', JSON.stringify(user));
            }

            // Eliminar usuario de localStorage
            function removeUserFromStorage() {
                localStorage.removeItem('guitarraFacilUser');
            }

            // Actualizar UI seg칰n el tipo de usuario
            function updateUIForUser(user) {
                if (user) {
                    authButtons.style.display = 'none';
                    userInfo.style.display = 'flex';
                    userName.textContent = user.name;
                    userRole.textContent = user.role === 'admin' ? 'Administrador' : 'Estudiante';
                    
                    // Mostrar contenido espec칤fico seg칰n el rol
                    const studentElements = document.querySelectorAll('.student-only');
                    const adminElements = document.querySelectorAll('.admin-only');
                    
                    if (user.role === 'admin') {
                        studentElements.forEach(el => el.style.display = 'none');
                        adminElements.forEach(el => el.style.display = 'block');
                        
                        // Actualizar nombre en panel admin
                        const adminWelcomeName = document.getElementById('admin-welcome-name');
                        if (adminWelcomeName) adminWelcomeName.textContent = user.name;
                    } else {
                        studentElements.forEach(el => el.style.display = 'block');
                        adminElements.forEach(el => el.style.display = 'none');
                        
                        // Actualizar nombre en dashboard estudiante
                        const studentWelcomeName = document.getElementById('student-welcome-name');
                        if (studentWelcomeName) studentWelcomeName.textContent = user.name;
                    }
                } else {
                    authButtons.style.display = 'flex';
                    userInfo.style.display = 'none';
                    
                    // Ocultar contenido espec칤fico
                    const roleElements = document.querySelectorAll('.student-only, .admin-only');
                    roleElements.forEach(el => el.style.display = 'none');
                }
            }

            // Cargar formulario en el modal
            function loadForm(formType) {
                currentFormType = formType;
                
                if (formType === 'login') {
                    modalFormSection.innerHTML = `
                        <div class="modal-form-header">
                            <h2>Bienvenido de vuelta</h2>
                            <p>Accede a tu cuenta para continuar tu aprendizaje</p>
                        </div>
                        
                        <form id="modalLoginForm">
                            <div class="modal-form-group">
                                <label for="modalUsername">Email o Usuario</label>
                                <div class="modal-input-with-icon" id="modalUsernameContainer">
                                    <i class="fas fa-user"></i>
                                    <input type="text" id="modalUsername" placeholder="Ingresa tu email o usuario" required>
                                </div>
                                <span class="error-message" id="modalUsernameError"></span>
                            </div>
                            
                            <div class="modal-form-group">
                                <label for="modalPassword">Contrase침a</label>
                                <div class="modal-input-with-icon" id="modalPasswordContainer">
                                    <i class="fas fa-lock"></i>
                                    <input type="password" id="modalPassword" placeholder="Ingresa tu contrase침a" required>
                                    <button type="button" id="togglePasswordBtn" style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #3498db; cursor: pointer;">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <span class="error-message" id="modalPasswordError"></span>
                            </div>
                            
                            <div class="modal-forgot-password">
                                <a href="#" id="modalForgotPassword">쯆lvidaste tu contrase침a?</a>
                            </div>
                            
                            <button type="submit" id="modalSubmitBtn" class="modal-submit-btn">
                                <span>INICIAR SESI칍N</span>
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </form>
                        
                        <div class="modal-separator">
                            <span>O contin칰a con</span>
                        </div>
                        
                        <div class="modal-social-login">
                            <div class="modal-social-btn google">
                                <i class="fab fa-google"></i>
                            </div>
                            <div class="modal-social-btn facebook">
                                <i class="fab fa-facebook-f"></i>
                            </div>
                            <div class="modal-social-btn apple">
                                <i class="fab fa-apple"></i>
                            </div>
                        </div>
                        
                        <div class="modal-signup-link">
                            쯅o tienes una cuenta? <a href="#" id="modalSwitchToSignup">REG칈STRATE</a>
                        </div>
                    `;
                } else {
                    modalFormSection.innerHTML = `
                        <div class="modal-form-header">
                            <h2>칔nete a nuestra comunidad</h2>
                            <p>Crea tu cuenta para comenzar tu viaje musical</p>
                        </div>
                        
                        <form id="modalSignupForm">
                            <div class="modal-form-group">
                                <label for="modalSignupName">Nombre completo</label>
                                <div class="modal-input-with-icon" id="modalSignupNameContainer">
                                    <i class="fas fa-user"></i>
                                    <input type="text" id="modalSignupName" placeholder="Ingresa tu nombre completo" required>
                                </div>
                                <span class="error-message" id="modalSignupNameError"></span>
                            </div>
                            
                            <div class="modal-form-group">
                                <label for="modalSignupEmail">Email</label>
                                <div class="modal-input-with-icon" id="modalSignupEmailContainer">
                                    <i class="fas fa-envelope"></i>
                                    <input type="email" id="modalSignupEmail" placeholder="Ingresa tu email" required>
                                </div>
                                <span class="error-message" id="modalSignupEmailError"></span>
                            </div>
                            
                            <div class="modal-form-group">
                                <label for="modalSignupPassword">Contrase침a</label>
                                <div class="modal-input-with-icon" id="modalSignupPasswordContainer">
                                    <i class="fas fa-lock"></i>
                                    <input type="password" id="modalSignupPassword" placeholder="Crea una contrase침a segura" required>
                                    <button type="button" id="toggleSignupPasswordBtn" style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #3498db; cursor: pointer;">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <span class="error-message" id="modalSignupPasswordError"></span>
                            </div>
                            
                            <div class="modal-form-group">
                                <label for="modalSignupConfirmPassword">Confirmar Contrase침a</label>
                                <div class="modal-input-with-icon" id="modalSignupConfirmPasswordContainer">
                                    <i class="fas fa-lock"></i>
                                    <input type="password" id="modalSignupConfirmPassword" placeholder="Confirma tu contrase침a" required>
                                </div>
                                <span class="error-message" id="modalSignupConfirmPasswordError"></span>
                            </div>
                            
                            <button type="submit" id="modalSignupSubmitBtn" class="modal-submit-btn">
                                <span>CREAR CUENTA</span>
                                <i class="fas fa-user-plus"></i>
                            </button>
                        </form>
                        
                        <div class="modal-separator">
                            <span>O reg칤strate con</span>
                        </div>
                        
                        <div class="modal-social-login">
                            <div class="modal-social-btn google">
                                <i class="fab fa-google"></i>
                            </div>
                            <div class="modal-social-btn facebook">
                                <i class="fab fa-facebook-f"></i>
                            </div>
                            <div class="modal-social-btn apple">
                                <i class="fab fa-apple"></i>
                            </div>
                        </div>
                        
                        <div class="modal-signup-link">
                            쯏a tienes una cuenta? <a href="#" id="modalSwitchToLogin">INICIA SESI칍N</a>
                        </div>
                    `;
                }
                
                // Configurar eventos para el formulario cargado
                setupFormEvents();
            }

            // Configurar eventos para el formulario
            function setupFormEvents() {
                if (currentFormType === 'login') {
                    const loginForm = document.getElementById('modalLoginForm');
                    const usernameInput = document.getElementById('modalUsername');
                    const passwordInput = document.getElementById('modalPassword');
                    const togglePasswordBtn = document.getElementById('togglePasswordBtn');
                    const submitBtn = document.getElementById('modalSubmitBtn');
                    const switchToSignup = document.getElementById('modalSwitchToSignup');
                    const forgotPassword = document.getElementById('modalForgotPassword');
                    
                    // Toggle password visibility
                    togglePasswordBtn?.addEventListener('click', function() {
                        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                        passwordInput.setAttribute('type', type);
                        this.innerHTML = type === 'password' ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
                    });
                    
                    // Switch to signup
                    switchToSignup?.addEventListener('click', function(e) {
                        e.preventDefault();
                        loadForm('signup');
                    });
                    
                    // Forgot password
                    forgotPassword?.addEventListener('click', function(e) {
                        e.preventDefault();
                        handleForgotPassword();
                    });
                    
                    // Login form submission
                    loginForm?.addEventListener('submit', function(e) {
                        e.preventDefault();
                        handleLogin();
                    });
                    
                    // Validaci칩n en tiempo real
                    usernameInput?.addEventListener('input', validateLoginForm);
                    passwordInput?.addEventListener('input', validateLoginForm);
                    
                    // Inicializar validaci칩n
                    validateLoginForm();
                } else {
                    const signupForm = document.getElementById('modalSignupForm');
                    const nameInput = document.getElementById('modalSignupName');
                    const emailInput = document.getElementById('modalSignupEmail');
                    const passwordInput = document.getElementById('modalSignupPassword');
                    const confirmPasswordInput = document.getElementById('modalSignupConfirmPassword');
                    const togglePasswordBtn = document.getElementById('toggleSignupPasswordBtn');
                    const submitBtn = document.getElementById('modalSignupSubmitBtn');
                    const switchToLogin = document.getElementById('modalSwitchToLogin');
                    
                    // Toggle password visibility
                    togglePasswordBtn?.addEventListener('click', function() {
                        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                        passwordInput.setAttribute('type', type);
                        this.innerHTML = type === 'password' ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
                    });
                    
                    // Switch to login
                    switchToLogin?.addEventListener('click', function(e) {
                        e.preventDefault();
                        loadForm('login');
                    });
                    
                    // Signup form submission
                    signupForm?.addEventListener('submit', function(e) {
                        e.preventDefault();
                        handleSignup();
                    });
                    
                    // Validaci칩n en tiempo real
                    nameInput?.addEventListener('input', validateSignupForm);
                    emailInput?.addEventListener('input', validateSignupForm);
                    passwordInput?.addEventListener('input', validateSignupForm);
                    confirmPasswordInput?.addEventListener('input', validateSignupForm);
                    
                    // Inicializar validaci칩n
                    validateSignupForm();
                }
            }

            // Validar formulario de login
            function validateLoginForm() {
                const username = document.getElementById('modalUsername')?.value.trim();
                const password = document.getElementById('modalPassword')?.value.trim();
                const submitBtn = document.getElementById('modalSubmitBtn');
                const usernameError = document.getElementById('modalUsernameError');
                const passwordError = document.getElementById('modalPasswordError');
                const usernameContainer = document.getElementById('modalUsernameContainer');
                const passwordContainer = document.getElementById('modalPasswordContainer');
                
                let isValid = true;
                
                // Validar username
                if (!username) {
                    usernameError.textContent = 'El email o usuario es obligatorio';
                    usernameContainer?.classList.add('error');
                    usernameContainer?.classList.remove('success');
                    isValid = false;
                } else if (username.includes('@') && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(username)) {
                    usernameError.textContent = 'Por favor, ingresa un correo v치lido';
                    usernameContainer?.classList.add('error');
                    usernameContainer?.classList.remove('success');
                    isValid = false;
                } else {
                    usernameError.textContent = '';
                    usernameContainer?.classList.remove('error');
                    usernameContainer?.classList.add('success');
                }
                
                // Validar contrase침a
                if (!password) {
                    passwordError.textContent = 'La contrase침a es obligatoria';
                    passwordContainer?.classList.add('error');
                    passwordContainer?.classList.remove('success');
                    isValid = false;
                } else if (password.length < 6) {
                    passwordError.textContent = 'La contrase침a debe tener al menos 6 caracteres';
                    passwordContainer?.classList.add('error');
                    passwordContainer?.classList.remove('success');
                    isValid = false;
                } else {
                    passwordError.textContent = '';
                    passwordContainer?.classList.remove('error');
                    passwordContainer?.classList.add('success');
                }
                
                // Habilitar/deshabilitar bot칩n
                if (submitBtn) {
                    submitBtn.disabled = !isValid;
                }
                
                return isValid;
            }

            // Validar formulario de registro
            function validateSignupForm() {
                const name = document.getElementById('modalSignupName')?.value.trim();
                const email = document.getElementById('modalSignupEmail')?.value.trim();
                const password = document.getElementById('modalSignupPassword')?.value.trim();
                const confirmPassword = document.getElementById('modalSignupConfirmPassword')?.value.trim();
                const submitBtn = document.getElementById('modalSignupSubmitBtn');
                
                let isValid = true;
                
                // Validar nombre
                if (!name) {
                    document.getElementById('modalSignupNameError').textContent = 'El nombre es obligatorio';
                    document.getElementById('modalSignupNameContainer').classList.add('error');
                    document.getElementById('modalSignupNameContainer').classList.remove('success');
                    isValid = false;
                } else if (name.length < 2) {
                    document.getElementById('modalSignupNameError').textContent = 'El nombre debe tener al menos 2 caracteres';
                    document.getElementById('modalSignupNameContainer').classList.add('error');
                    document.getElementById('modalSignupNameContainer').classList.remove('success');
                    isValid = false;
                } else {
                    document.getElementById('modalSignupNameError').textContent = '';
                    document.getElementById('modalSignupNameContainer').classList.remove('error');
                    document.getElementById('modalSignupNameContainer').classList.add('success');
                }
                
                // Validar email
                if (!email) {
                    document.getElementById('modalSignupEmailError').textContent = 'El email es obligatorio';
                    document.getElementById('modalSignupEmailContainer').classList.add('error');
                    document.getElementById('modalSignupEmailContainer').classList.remove('success');
                    isValid = false;
                } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    document.getElementById('modalSignupEmailError').textContent = 'Por favor, ingresa un correo v치lido';
                    document.getElementById('modalSignupEmailContainer').classList.add('error');
                    document.getElementById('modalSignupEmailContainer').classList.remove('success');
                    isValid = false;
                } else {
                    document.getElementById('modalSignupEmailError').textContent = '';
                    document.getElementById('modalSignupEmailContainer').classList.remove('error');
                    document.getElementById('modalSignupEmailContainer').classList.add('success');
                }
                
                // Validar contrase침a
                if (!password) {
                    document.getElementById('modalSignupPasswordError').textContent = 'La contrase침a es obligatoria';
                    document.getElementById('modalSignupPasswordContainer').classList.add('error');
                    document.getElementById('modalSignupPasswordContainer').classList.remove('success');
                    isValid = false;
                } else if (password.length < 6) {
                    document.getElementById('modalSignupPasswordError').textContent = 'La contrase침a debe tener al menos 6 caracteres';
                    document.getElementById('modalSignupPasswordContainer').classList.add('error');
                    document.getElementById('modalSignupPasswordContainer').classList.remove('success');
                    isValid = false;
                } else {
                    document.getElementById('modalSignupPasswordError').textContent = '';
                    document.getElementById('modalSignupPasswordContainer').classList.remove('error');
                    document.getElementById('modalSignupPasswordContainer').classList.add('success');
                }
                
                // Validar confirmaci칩n de contrase침a
                if (!confirmPassword) {
                    document.getElementById('modalSignupConfirmPasswordError').textContent = 'Confirma tu contrase침a';
                    document.getElementById('modalSignupConfirmPasswordContainer').classList.add('error');
                    document.getElementById('modalSignupConfirmPasswordContainer').classList.remove('success');
                    isValid = false;
                } else if (password !== confirmPassword) {
                    document.getElementById('modalSignupConfirmPasswordError').textContent = 'Las contrase침as no coinciden';
                    document.getElementById('modalSignupConfirmPasswordContainer').classList.add('error');
                    document.getElementById('modalSignupConfirmPasswordContainer').classList.remove('success');
                    isValid = false;
                } else {
                    document.getElementById('modalSignupConfirmPasswordError').textContent = '';
                    document.getElementById('modalSignupConfirmPasswordContainer').classList.remove('error');
                    document.getElementById('modalSignupConfirmPasswordContainer').classList.add('success');
                }
                
                // Habilitar/deshabilitar bot칩n
                if (submitBtn) {
                    submitBtn.disabled = !isValid;
                }
                
                return isValid;
            }

            // Manejar login
            async function handleLogin() {
                if (!validateLoginForm()) return;
                
                const username = document.getElementById('modalUsername').value.trim();
                const password = document.getElementById('modalPassword').value;
                const submitBtn = document.getElementById('modalSubmitBtn');
                
                // Simular proceso de login
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin loading-spinner"></i> Iniciando sesi칩n...';
                
                // Simular delay de red
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Credenciales de demostraci칩n
                const demoCredentials = [
                    { username: 'estudiante@demo.com', password: '123456', name: 'Estudiante Demo', role: 'student' },
                    { username: 'admin@demo.com', password: 'admin123', name: 'Administrador Demo', role: 'admin' },
                    { username: 'usuario', password: '123456', name: 'Usuario Regular', role: 'student' }
                ];
                
                const user = demoCredentials.find(
                    cred => (cred.username === username || cred.name.toLowerCase().includes(username.toLowerCase())) && 
                           cred.password === password
                );
                
                if (user) {
                    // Login exitoso
                    currentUser = user;
                    saveUserToStorage(user);
                    updateUIForUser(user);
                    
                    submitBtn.classList.remove('error-btn');
                    submitBtn.classList.add('success-btn');
                    submitBtn.innerHTML = '<i class="fas fa-check"></i> 춰칄xito!';
                    
                    setTimeout(() => {
                        closeModal();
                        alert(`춰Bienvenido de nuevo, ${user.name}!`);
                    }, 500);
                } else {
                    // Credenciales incorrectas
                    submitBtn.classList.remove('success-btn');
                    submitBtn.classList.add('error-btn');
                    submitBtn.innerHTML = '<i class="fas fa-times"></i> Error';
                    
                    setTimeout(() => {
                        submitBtn.disabled = false;
                        submitBtn.classList.remove('error-btn');
                        submitBtn.innerHTML = '<span>INICIAR SESI칍N</span><i class="fas fa-arrow-right"></i>';
                        alert('Credenciales incorrectas. Por favor, int칠ntalo de nuevo.');
                    }, 500);
                }
            }

            // Manejar registro
            async function handleSignup() {
                if (!validateSignupForm()) return;
                
                const name = document.getElementById('modalSignupName').value.trim();
                const email = document.getElementById('modalSignupEmail').value.trim();
                const password = document.getElementById('modalSignupPassword').value;
                const submitBtn = document.getElementById('modalSignupSubmitBtn');
                
                // Simular proceso de registro
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin loading-spinner"></i> Creando cuenta...';
                
                // Simular delay de red
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Registrar nuevo usuario
                currentUser = {
                    name: name,
                    email: email,
                    role: 'student', // Todos los nuevos usuarios son estudiantes por defecto
                    createdAt: new Date().toISOString()
                };
                
                saveUserToStorage(currentUser);
                updateUIForUser(currentUser);
                
                submitBtn.classList.remove('error-btn');
                submitBtn.classList.add('success-btn');
                submitBtn.innerHTML = '<i class="fas fa-check"></i> 춰Cuenta creada!';
                
                setTimeout(() => {
                    closeModal();
                    alert(`춰Bienvenido a Guitarra F치cil, ${name}! Tu cuenta ha sido creada exitosamente.`);
                }, 500);
            }

            // Manejar "Olvid칠 mi contrase침a"
            function handleForgotPassword() {
                const email = prompt('Por favor, ingresa tu email para recuperar tu contrase침a:');
                if (email && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    alert(`Se ha enviado un enlace de recuperaci칩n a: ${email}\n\n(Esta es una demostraci칩n. En una aplicaci칩n real se enviar칤a un email real.)`);
                } else if (email) {
                    alert('Por favor, ingresa un email v치lido.');
                }
            }

            // Manejar logout
            function handleLogout() {
                currentUser = null;
                removeUserFromStorage();
                updateUIForUser(null);
                alert('Sesi칩n cerrada exitosamente.');
            }

            // Abrir modal
            function openModal(formType = 'login') {
                loadForm(formType);
                loginModal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }

            // Cerrar modal
            function closeModal() {
                loginModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }

            // Event Listeners
            studentLoginBtn?.addEventListener('click', () => openModal('login'));
            adminLoginBtn?.addEventListener('click', () => openModal('login'));
            modalCloseBtn?.addEventListener('click', closeModal);
            modalSignupBtn?.addEventListener('click', () => openModal('signup'));
            modalLoginBtn?.addEventListener('click', () => openModal('login'));
            logoutBtn?.addEventListener('click', handleLogout);

            // Cerrar modal al hacer clic fuera
            loginModal?.addEventListener('click', function(e) {
                if (e.target === loginModal) {
                    closeModal();
                }
            });

            // Cargar usuario al iniciar
            loadUserFromStorage();

            // Funciones de administraci칩n
            window.manageUsers = function() {
                alert('Redirigiendo a gesti칩n de usuarios...');
            };

            window.manageContent = function() {
                alert('Redirigiendo a gesti칩n de contenido...');
            };

            window.viewStatistics = function() {
                alert('Redirigiendo a estad칤sticas...');
            };

            // ========== NUEVO AFINADOR MEJORADO ==========
            // Configuraci칩n de cuerdas
            const STRINGS = {
                'mi-high': {
                    frequency: 329.63,
                    note: 'E4',
                    name: '1춹 Cuerda - MI',
                    range: { low: 280, high: 400 }
                },
                'si': {
                    frequency: 246.94,
                    note: 'B3',
                    name: '2춹 Cuerda - SI',
                    range: { low: 200, high: 320 }
                },
                'sol': {
                    frequency: 196.00,
                    note: 'G3',
                    name: '3춹 Cuerda - SOL',
                    range: { low: 160, high: 260 }
                },
                're': {
                    frequency: 146.83,
                    note: 'D3',
                    name: '4춹 Cuerda - RE',
                    range: { low: 120, high: 200 }
                },
                'la': {
                    frequency: 110.00,
                    note: 'A2',
                    name: '5춹 Cuerda - LA',
                    range: { low: 90, high: 150 }
                },
                'mi-low': {
                    frequency: 82.41,
                    note: 'E2',
                    name: '6춹 Cuerda - MI',
                    range: { low: 65, high: 120 }
                }
            };

            // Configuraci칩n general
            const MOVING_AVERAGE_SIZE = 8;
            const TUNING_MARGIN_CENTS = 8;
            const WARNING_MARGIN_CENTS = 20;

            // Estado de la aplicaci칩n
            const state = {
                audioContext: null,
                analyser: null,
                microphone: null,
                isListening: false,
                animationId: null,
                signalStrength: 0,
                frequencyHistory: [],
                lastValidDetection: null,
                currentString: 'mi-high',
                debugInfo: ''
            };

            // Elementos DOM del afinador
            const elementsAfinador = {
                circleIndicator: document.getElementById('circleIndicator'),
                deviationText: document.getElementById('deviationText'),
                frequencyDisplay: document.getElementById('frequencyDisplay'),
                centsDisplay: document.getElementById('centsDisplay'),
                needle: document.getElementById('needle'),
                micToggle: document.getElementById('micToggle'),
                micStatus: document.getElementById('micStatus'),
                statusText: document.getElementById('statusText'),
                qualityLevel: document.getElementById('qualityLevel'),
                qualityValue: document.getElementById('qualityValue'),
                debugInfo: document.getElementById('debugInfo'),
                targetFrequency: document.getElementById('targetFrequency')
            };

            // Inicializar afinador
            function initAfinador() {
                setupEventListenersAfinador();
                updateStringDisplayAfinador();
            }

            // Configurar event listeners del afinador
            function setupEventListenersAfinador() {
                // Bot칩n de micr칩fono
                elementsAfinador.micToggle?.addEventListener('click', toggleMicrophoneAfinador);
                
                // Botones de selecci칩n de cuerda
                document.querySelectorAll('.string-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        selectStringAfinador(this.dataset.string);
                    });
                });
            }

            // Seleccionar cuerda en el afinador
            function selectStringAfinador(stringType) {
                state.currentString = stringType;
                state.frequencyHistory = [];
                state.lastValidDetection = null;
                
                // Actualizar botones activos
                document.querySelectorAll('.string-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                const activeBtn = document.querySelector(`.string-btn[data-string="${stringType}"]`);
                if (activeBtn) activeBtn.classList.add('active');
                
                // Actualizar display
                updateStringDisplayAfinador();
                resetDisplayAfinador();
                
                updateDebugInfoAfinador(`Cuerda seleccionada: ${STRINGS[stringType].name}`);
            }

            // Actualizar display seg칰n la cuerda seleccionada
            function updateStringDisplayAfinador() {
                const string = STRINGS[state.currentString];
                if (elementsAfinador.targetFrequency) {
                    elementsAfinador.targetFrequency.innerHTML = 
                        `Frecuencia objetivo: <strong>${string.frequency} Hz</strong> (${string.note})`;
                }
                if (elementsAfinador.circleIndicator) {
                    elementsAfinador.circleIndicator.textContent = string.note;
                }
                if (elementsAfinador.statusText) {
                    elementsAfinador.statusText.textContent = `Seleccionada: ${string.name} - Activa el micr칩fono`;
                }
            }

            // Alternar micr칩fono del afinador
            async function toggleMicrophoneAfinador() {
                if (!state.isListening) {
                    try {
                        await startListeningAfinador();
                    } catch (error) {
                        console.error('Error al acceder al micr칩fono:', error);
                        alert('No se pudo acceder al micr칩fono. Aseg칰rate de permitir el acceso.');
                    }
                } else {
                    stopListeningAfinador();
                }
            }

            // Iniciar escucha por micr칩fono en el afinador
            async function startListeningAfinador() {
                try {
                    state.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    
                    // Configurar analizador
                    state.analyser = state.audioContext.createAnalyser();
                    state.analyser.fftSize = 8192;
                    state.analyser.smoothingTimeConstant = 0.5;
                    
                    // Obtener stream de micr칩fono
                    const stream = await navigator.mediaDevices.getUserMedia({ 
                        audio: {
                            echoCancellation: true,
                            noiseSuppression: true,
                            autoGainControl: true,
                        }
                    });
                    
                    // Conectar micr칩fono -> analizador
                    state.microphone = state.audioContext.createMediaStreamSource(stream);
                    state.microphone.connect(state.analyser);
                    
                    state.isListening = true;
                    if (elementsAfinador.micStatus) {
                        elementsAfinador.micStatus.textContent = 'Desactivar Micr칩fono';
                    }
                    if (elementsAfinador.micToggle) {
                        elementsAfinador.micToggle.classList.add('listening');
                    }
                    
                    const string = STRINGS[state.currentString];
                    if (elementsAfinador.statusText) {
                        elementsAfinador.statusText.textContent = `游꿧 Toca la ${string.name} ahora`;
                    }
                    updateDebugInfoAfinador(`Escuchando - ${string.name} - Toca la cuerda`);
                    
                    analyzeAudioAfinador();
                    
                } catch (error) {
                    console.error('Error en configuraci칩n de audio:', error);
                    updateDebugInfoAfinador('Error: ' + error.message);
                    throw error;
                }
            }

            // Detener escucha por micr칩fono en el afinador
            function stopListeningAfinador() {
                if (state.animationId) {
                    cancelAnimationFrame(state.animationId);
                    state.animationId = null;
                }
                
                if (state.microphone) {
                    state.microphone.disconnect();
                    state.microphone = null;
                }
                
                if (state.audioContext) {
                    state.audioContext.close();
                    state.audioContext = null;
                }
                
                state.isListening = false;
                state.frequencyHistory = [];
                state.lastValidDetection = null;
                if (elementsAfinador.micStatus) {
                    elementsAfinador.micStatus.textContent = 'Activar Micr칩fono';
                }
                if (elementsAfinador.micToggle) {
                    elementsAfinador.micToggle.classList.remove('listening');
                }
                
                const string = STRINGS[state.currentString];
                if (elementsAfinador.statusText) {
                    elementsAfinador.statusText.textContent = `Micr칩fono desactivado - ${string.name}`;
                }
                updateDebugInfoAfinador('Micr칩fono desactivado');
                
                resetDisplayAfinador();
            }

            // Resetear display del afinador
            function resetDisplayAfinador() {
                if (elementsAfinador.circleIndicator) {
                    elementsAfinador.circleIndicator.className = 'circle-indicator';
                }
                if (elementsAfinador.deviationText) {
                    elementsAfinador.deviationText.textContent = 'Activa el micr칩fono';
                }
                if (elementsAfinador.frequencyDisplay) {
                    elementsAfinador.frequencyDisplay.textContent = '-- Hz';
                }
                if (elementsAfinador.centsDisplay) {
                    elementsAfinador.centsDisplay.textContent = '-- cents';
                }
                if (elementsAfinador.needle) {
                    elementsAfinador.needle.style.transform = 'rotate(0deg)';
                }
                if (elementsAfinador.qualityLevel) {
                    elementsAfinador.qualityLevel.style.width = '0%';
                }
                if (elementsAfinador.qualityValue) {
                    elementsAfinador.qualityValue.textContent = '0%';
                }
            }

            // Actualizar informaci칩n de debug del afinador
            function updateDebugInfoAfinador(message) {
                state.debugInfo = message;
                if (elementsAfinador.debugInfo) {
                    elementsAfinador.debugInfo.textContent = message;
                }
            }

            // A침adir frecuencia al historial para promedio m칩vil
            function addToFrequencyHistory(frequency) {
                state.frequencyHistory.push(frequency);
                
                if (state.frequencyHistory.length > MOVING_AVERAGE_SIZE) {
                    state.frequencyHistory.shift();
                }
            }

            // Calcular promedio m칩vil de frecuencias
            function calculateMovingAverage() {
                if (state.frequencyHistory.length === 0) return 0;
                
                const sum = state.frequencyHistory.reduce((a, b) => a + b, 0);
                return sum / state.frequencyHistory.length;
            }

            // Convertir diferencia de frecuencia a cents
            function frequencyToCents(frequency, targetFrequency) {
                return 1200 * Math.log2(frequency / targetFrequency);
            }

            // Algoritmo de autocorrelaci칩n optimizado por cuerda
            function improvedAutocorrelation(dataArray, sampleRate) {
                const string = STRINGS[state.currentString];
                const data = new Float32Array(dataArray.length);
                
                // Normalizar datos
                let maxVal = 0;
                for (let i = 0; i < dataArray.length; i++) {
                    data[i] = dataArray[i];
                    if (Math.abs(data[i]) > maxVal) maxVal = Math.abs(data[i]);
                }
                
                // Normalizar a [-1, 1]
                if (maxVal > 0) {
                    for (let i = 0; i < data.length; i++) {
                        data[i] /= maxVal;
                    }
                }
                
                // Calcular energ칤a de la se침al
                let energy = 0;
                for (let i = 0; i < data.length; i++) {
                    energy += data[i] * data[i];
                }
                energy = energy / data.length;
                
                if (energy < 0.001) {
                    return { valid: false, frequency: 0, strength: energy };
                }
                
                // Autocorrelaci칩n con rango espec칤fico para la cuerda
                let bestLag = 0;
                let bestCorrelation = -1;
                
                const minLag = Math.floor(sampleRate / string.range.high);
                const maxLag = Math.floor(sampleRate / string.range.low);
                
                for (let lag = minLag; lag <= maxLag && lag < data.length/2; lag++) {
                    let correlation = 0;
                    
                    for (let i = 0; i < data.length - lag; i++) {
                        correlation += data[i] * data[i + lag];
                    }
                    
                    correlation = correlation / (data.length - lag);
                    
                    if (correlation > bestCorrelation) {
                        bestCorrelation = correlation;
                        bestLag = lag;
                    }
                }
                
                if (bestCorrelation < 0.05 || bestLag === 0) {
                    return { valid: false, frequency: 0, strength: energy };
                }
                
                const frequency = sampleRate / bestLag;
                
                // Validaci칩n de rango espec칤fica para la cuerda
                if (frequency < string.range.low || frequency > string.range.high) {
                    return { valid: false, frequency: frequency, strength: energy };
                }
                
                return { 
                    valid: true, 
                    frequency: frequency, 
                    strength: Math.min(energy * 10, 1)
                };
            }

            // Analizar audio en el afinador
            function analyzeAudioAfinador() {
                if (!state.isListening) return;

                const bufferLength = state.analyser.fftSize;
                const dataArray = new Float32Array(bufferLength);
                state.analyser.getFloatTimeDomainData(dataArray);
                
                // Detectar frecuencia con algoritmo mejorado
                const detection = improvedAutocorrelation(dataArray, state.audioContext.sampleRate);
                
                if (detection.valid) {
                    state.signalStrength = detection.strength;
                    state.lastValidDetection = detection.frequency;
                    
                    // A침adir al historial y calcular promedio m칩vil
                    addToFrequencyHistory(detection.frequency);
                    const smoothedFrequency = calculateMovingAverage();
                    
                    updateDisplayAfinador(smoothedFrequency);
                    
                    const string = STRINGS[state.currentString];
                    updateDebugInfoAfinador(`${string.note} detectado: ${Math.round(detection.frequency)} Hz | Fuerza: ${(detection.strength*100).toFixed(1)}%`);
                } else {
                    if (state.lastValidDetection) {
                        // Usar 칰ltima detecci칩n v치lida por un tiempo
                        updateDisplayAfinador(state.lastValidDetection);
                        updateDebugInfoAfinador(`Usando 칰ltima lectura: ${Math.round(state.lastValidDetection)} Hz | Se침al d칠bil`);
                    } else {
                        const string = STRINGS[state.currentString];
                        if (elementsAfinador.statusText) {
                            elementsAfinador.statusText.textContent = `游꿧 Toca la ${string.name} m치s fuerte y claro`;
                        }
                        if (elementsAfinador.qualityLevel) {
                            elementsAfinador.qualityLevel.style.width = '0%';
                        }
                        if (elementsAfinador.qualityValue) {
                            elementsAfinador.qualityValue.textContent = '0%';
                        }
                        updateDebugInfoAfinador(`Buscando ${string.note}... | Energ칤a: ${(detection.strength*100).toFixed(1)}%`);
                    }
                }
                
                state.animationId = requestAnimationFrame(analyzeAudioAfinador);
            }

            // Actualizar display con la frecuencia detectada
            function updateDisplayAfinador(frequency) {
                const string = STRINGS[state.currentString];
                
                // Calcular diferencia en cents
                const cents = frequencyToCents(frequency, string.frequency);
                
                // Redondear a n칰meros enteros
                const displayFrequency = Math.round(frequency);
                const displayCents = Math.round(cents);
                
                // Actualizar displays
                if (elementsAfinador.frequencyDisplay) {
                    elementsAfinador.frequencyDisplay.textContent = `${displayFrequency} Hz`;
                }
                if (elementsAfinador.centsDisplay) {
                    elementsAfinador.centsDisplay.textContent = `${cents > 0 ? '+' : ''}${displayCents} cents`;
                }
                
                // Actualizar calidad de se침al
                const qualityPercent = Math.min(state.signalStrength * 100, 100);
                if (elementsAfinador.qualityLevel) {
                    elementsAfinador.qualityLevel.style.width = `${qualityPercent}%`;
                }
                if (elementsAfinador.qualityValue) {
                    elementsAfinador.qualityValue.textContent = `${Math.round(qualityPercent)}%`;
                }
                
                // Actualizar aguja
                updateNeedleAfinador(cents);
                
                // Actualizar c칤rculo y texto seg칰n la desviaci칩n
                updateDeviationDisplayAfinador(cents, string);
            }

            // Actualizar posici칩n de la aguja
            function updateNeedleAfinador(cents) {
                if (!elementsAfinador.needle) return;
                
                const maxDisplayCents = 50;
                const limitedCents = Math.max(Math.min(cents, maxDisplayCents), -maxDisplayCents);
                const rotation = (limitedCents / maxDisplayCents) * 90;
                elementsAfinador.needle.style.transform = `rotate(${rotation}deg)`;
            }

            // Actualizar display de desviaci칩n
            function updateDeviationDisplayAfinador(cents, string) {
                const absCents = Math.abs(cents);
                let status, colorClass, text;
                
                if (absCents <= TUNING_MARGIN_CENTS) {
                    status = 'perfect';
                    colorClass = 'perfect';
                    text = `춰Perfecto!`;
                    if (elementsAfinador.statusText) {
                        elementsAfinador.statusText.innerHTML = `游꿧 <strong>춰${string.note} perfectamente afinado!</strong>`;
                    }
                } else if (absCents <= WARNING_MARGIN_CENTS) {
                    status = 'warning';
                    colorClass = cents > 0 ? 'sharp' : 'flat';
                    text = cents > 0 ? 'Agudo' : 'Grave';
                    if (elementsAfinador.statusText) {
                        elementsAfinador.statusText.textContent = cents > 0 ? 
                            `游꿧 ${string.note} un poco AGUDO - Afloja ligeramente` : 
                            `游꿧 ${string.note} un poco GRAVE - Aprieta ligeramente`;
                    }
                } else {
                    status = 'out';
                    colorClass = cents > 0 ? 'sharp' : 'flat';
                    text = cents > 0 ? 'Muy agudo' : 'Muy grave';
                    if (elementsAfinador.statusText) {
                        elementsAfinador.statusText.textContent = cents > 0 ? 
                            `游꿧 ${string.note} muy AGUDO - Afloja la clavija` : 
                            `游꿧 ${string.note} muy GRAVE - Aprieta la clavija`;
                    }
                }
                
                // Aplicar cambios al display
                if (elementsAfinador.circleIndicator) {
                    elementsAfinador.circleIndicator.className = `circle-indicator ${colorClass}`;
                }
                if (elementsAfinador.deviationText) {
                    elementsAfinador.deviationText.textContent = text;
                    elementsAfinador.deviationText.style.color = 
                        colorClass === 'perfect' ? '#2ecc71' : 
                        colorClass === 'sharp' ? '#f39c12' : '#e74c3c';
                }
            }

            // Inicializar el afinador cuando se carga la p치gina
            if (document.getElementById('afinacion-tips')) {
                initAfinador();
            }

            // ========== METR칍NOMO ==========
            // Variables del metr칩nomo
            let metronomo = {
                isPlaying: false,
                bpm: 120,
                timeSignatureTop: 4,
                subdivision: 1, // 1 = 1/1, 2 = 1/2, 4 = 1/4
                beatCount: 0,
                timer: null,
                tapTimes: [],
                audioContext: null
            };

            // Elementos del DOM del metr칩nomo
            const metronomoElements = {
                bpmValue: document.getElementById('bpmValue'),
                currentBpm: document.getElementById('currentBpm'),
                bpmSlider: document.getElementById('bpmSlider'),
                timeTop: document.getElementById('timeTop'),
                startBtn: document.getElementById('startBtn'),
                stopBtn: document.getElementById('stopBtn'),
                tapTempoBtn: document.getElementById('tapTempoBtn'),
                beatDisplay: document.getElementById('beatDisplay'),
                subdivisionButtons: document.getElementById('subdivisionButtons')
            };

            // Inicializar el metr칩nomo
            function initMetronomo() {
                if (!metronomoElements.bpmValue) return;
                
                // Contexto de audio
                metronomo.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Inicializar display de comp치s
                initBeatDisplayMetronomo();
                
                // Event Listeners del metr칩nomo
                setupMetronomoEventListeners();
                
                // Teclado shortcuts
                document.addEventListener('keydown', handleMetronomoKeyboardShortcuts);
                
                // Asegurarse de que el audio context se active con un clic del usuario
                document.body.addEventListener('click', function() {
                    if (metronomo.audioContext && metronomo.audioContext.state === 'suspended') {
                        metronomo.audioContext.resume();
                    }
                }, { once: true });
            }

            // Configurar event listeners del metr칩nomo
            function setupMetronomoEventListeners() {
                // Slider de BPM
                metronomoElements.bpmSlider?.addEventListener('input', () => {
                    setBpmMetronomo(parseInt(metronomoElements.bpmSlider.value));
                });
                
                // Comp치s
                metronomoElements.timeTop?.addEventListener('change', () => {
                    setTimeSignatureMetronomo(parseInt(metronomoElements.timeTop.value));
                });
                
                // Botones de subdivisi칩n
                metronomoElements.subdivisionButtons?.querySelectorAll('.subdivision-btn').forEach(button => {
                    button.addEventListener('click', () => {
                        setSubdivisionMetronomo(button.dataset.value);
                    });
                });
                
                // Botones de inicio/detenci칩n
                metronomoElements.startBtn?.addEventListener('click', startMetronomo);
                metronomoElements.stopBtn?.addEventListener('click', stopMetronomo);
                
                // Tap tempo
                metronomoElements.tapTempoBtn?.addEventListener('click', tapTempoMetronomo);
            }

            // Inicializar display de comp치s
            function initBeatDisplayMetronomo() {
                if (!metronomoElements.beatDisplay) return;
                
                metronomoElements.beatDisplay.innerHTML = '';
                for (let i = 0; i < metronomo.timeSignatureTop; i++) {
                    const beatCell = document.createElement('div');
                    beatCell.className = 'beat-cell';
                    if (i === 0) beatCell.classList.add('accent');
                    beatCell.textContent = i + 1;
                    metronomoElements.beatDisplay.appendChild(beatCell);
                }
            }

            // Establecer BPM
            function setBpmMetronomo(value) {
                metronomo.bpm = Math.max(40, Math.min(240, value));
                
                if (metronomoElements.bpmValue) {
                    metronomoElements.bpmValue.textContent = metronomo.bpm;
                }
                if (metronomoElements.currentBpm) {
                    metronomoElements.currentBpm.textContent = metronomo.bpm;
                }
                if (metronomoElements.bpmSlider) {
                    metronomoElements.bpmSlider.value = metronomo.bpm;
                }
                
                // Reiniciar el temporizador si est치 en ejecuci칩n
                if (metronomo.isPlaying) {
                    stopMetronomo();
                    startMetronomo();
                }
            }

            // Establecer comp치s
            function setTimeSignatureMetronomo(top) {
                metronomo.timeSignatureTop = Math.max(1, Math.min(4, top));
                
                if (metronomoElements.timeTop) {
                    metronomoElements.timeTop.value = metronomo.timeSignatureTop;
                }
                
                // Reiniciar el contador de tiempo
                metronomo.beatCount = 0;
                
                // Actualizar display de comp치s
                initBeatDisplayMetronomo();
                
                // Reiniciar el temporizador si est치 en ejecuci칩n
                if (metronomo.isPlaying) {
                    stopMetronomo();
                    startMetronomo();
                }
            }

            // Establecer subdivisi칩n
            function setSubdivisionMetronomo(value) {
                metronomo.subdivision = parseInt(value);
                
                // Actualizar botones de subdivisi칩n
                if (metronomoElements.subdivisionButtons) {
                    metronomoElements.subdivisionButtons.querySelectorAll('.subdivision-btn').forEach(btn => {
                        if (parseInt(btn.dataset.value) === metronomo.subdivision) {
                            btn.classList.add('active');
                        } else {
                            btn.classList.remove('active');
                        }
                    });
                }
                
                // Reiniciar el temporizador si est치 en ejecuci칩n
                if (metronomo.isPlaying) {
                    stopMetronomo();
                    startMetronomo();
                }
            }

            // Crear sonido del metr칩nomo
            function playSoundMetronomo(isAccent) {
                if (!metronomo.audioContext) return;
                
                // Crear oscilador
                const oscillator = metronomo.audioContext.createOscillator();
                const gainNode = metronomo.audioContext.createGain();
                
                // Configurar frecuencia seg칰n si es acento o no
                oscillator.frequency.value = isAccent ? 800 : 600;
                oscillator.type = 'sine';
                
                // Configurar volumen
                gainNode.gain.value = isAccent ? 0.8 : 0.5;
                
                // Conectar nodos
                oscillator.connect(gainNode);
                gainNode.connect(metronomo.audioContext.destination);
                
                // Configurar envolvente de volumen
                const now = metronomo.audioContext.currentTime;
                gainNode.gain.setValueAtTime(0, now);
                gainNode.gain.linearRampToValueAtTime(isAccent ? 0.8 : 0.5, now + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.1);
                
                // Iniciar y detener sonido
                oscillator.start(now);
                oscillator.stop(now + 0.1);
            }

            // Iniciar metr칩nomo
            function startMetronomo() {
                if (metronomo.isPlaying) return;
                
                metronomo.isPlaying = true;
                if (metronomoElements.startBtn) metronomoElements.startBtn.disabled = true;
                if (metronomoElements.stopBtn) metronomoElements.stopBtn.disabled = false;
                
                // Calcular intervalo basado en BPM y subdivisi칩n
                const interval = (60000 / metronomo.bpm) * (1 / metronomo.subdivision);
                
                // Iniciar temporizador
                metronomo.timer = setInterval(() => {
                    // Determinar si es el primer tiempo (acento)
                    const totalBeats = metronomo.timeSignatureTop * metronomo.subdivision;
                    const currentSubBeat = metronomo.beatCount % totalBeats;
                    const isFirstBeatOfMeasure = currentSubBeat === 0;
                    
                    // Reproducir sonido (acento en primer tiempo del comp치s)
                    playSoundMetronomo(isFirstBeatOfMeasure);
                    
                    // Actualizar visualizaci칩n de comp치s
                    updateBeatDisplayMetronomo();
                    
                    // Incrementar contador de tiempo
                    metronomo.beatCount++;
                }, interval);
            }

            // Detener metr칩nomo
            function stopMetronomo() {
                if (!metronomo.isPlaying) return;
                
                metronomo.isPlaying = false;
                if (metronomoElements.startBtn) metronomoElements.startBtn.disabled = false;
                if (metronomoElements.stopBtn) metronomoElements.stopBtn.disabled = true;
                
                clearInterval(metronomo.timer);
                
                // Resetear display de comp치s
                if (metronomoElements.beatDisplay) {
                    const beatCells = metronomoElements.beatDisplay.querySelectorAll('.beat-cell');
                    beatCells.forEach(cell => cell.classList.remove('active'));
                }
            }

            // Actualizar display de comp치s
            function updateBeatDisplayMetronomo() {
                if (!metronomoElements.beatDisplay) return;
                
                const beatCells = metronomoElements.beatDisplay.querySelectorAll('.beat-cell');
                const currentBeat = Math.floor(metronomo.beatCount / metronomo.subdivision) % metronomo.timeSignatureTop;
                
                // Remover clase activa de todas las celdas
                beatCells.forEach(cell => cell.classList.remove('active'));
                
                // Agregar clase activa a la celda actual
                if (beatCells[currentBeat]) {
                    beatCells[currentBeat].classList.add('active');
                }
            }

            // Funci칩n Tap Tempo
            function tapTempoMetronomo() {
                const now = Date.now();
                metronomo.tapTimes.push(now);
                
                // Mantener solo los 칰ltimos 4 taps
                if (metronomo.tapTimes.length > 4) {
                    metronomo.tapTimes.shift();
                }
                
                // Calcular BPM si hay al menos 2 taps
                if (metronomo.tapTimes.length > 1) {
                    const intervals = [];
                    for (let i = 1; i < metronomo.tapTimes.length; i++) {
                        intervals.push(metronomo.tapTimes[i] - metronomo.tapTimes[i - 1]);
                    }
                    
                    const averageInterval = intervals.reduce((a, b) => a + b) / intervals.length;
                    const calculatedBpm = Math.round(60000 / averageInterval);
                    
                    // Establecer BPM (limitado a 40-240)
                    setBpmMetronomo(Math.max(40, Math.min(240, calculatedBpm)));
                }
                
                // Animaci칩n de feedback visual
                if (metronomoElements.tapTempoBtn) {
                    metronomoElements.tapTempoBtn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        metronomoElements.tapTempoBtn.style.transform = 'scale(1)';
                    }, 100);
                }
            }

            // Manejar teclado shortcuts del metr칩nomo
            function handleMetronomoKeyboardShortcuts(e) {
                // Solo procesar shortcuts si estamos en la p치gina del metr칩nomo
                if (!document.getElementById('metronomo')?.classList.contains('active')) {
                    return;
                }
                
                switch(e.key) {
                    case ' ':
                        e.preventDefault();
                        if (metronomo.isPlaying) {
                            stopMetronomo();
                        } else {
                            startMetronomo();
                        }
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        setBpmMetronomo(metronomo.bpm + 1);
                        break;
                    case 'ArrowDown':
                        e.preventDefault();
                        setBpmMetronomo(metronomo.bpm - 1);
                        break;
                    case 't':
                    case 'T':
                        tapTempoMetronomo();
                        break;
                }
            }
        });
    </script>
</body>
</html>